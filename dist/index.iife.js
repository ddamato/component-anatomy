!function(){"use strict";const t=/\[(?<textContent>[^\]]+)\]\((?<href>[^\)]+)\)/g;class e extends window.HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='<style type="text/css">*, *:before, *:after {\n  box-sizing: border-box;\n}\n\n:host {\n  display: inline-block;\n}\n\n#component-anatomy {\n  display: inline-flex;\n}\n\n:host([orientation=\'vertical\']) #component-anatomy {\n  flex-direction: column;\n}\n\n#area {\n  display: inline-block;\n  margin: 0;\n  padding: 0;\n  position: relative;\n  list-style: none;\n  counter-reset: anatomy;\n  align-self: center;\n  flex-shrink: 0;\n  margin-bottom: auto;\n}\n\n#area li:before {  \n  content: counter(anatomy);\n  counter-increment: anatomy;\n}\n\n#pins {\n  margin: 0;\n  padding: 0;\n  position: absolute;\n  inset: 0;\n}\n\n#pins li {\n  position: absolute;\n  border: .1em solid var(--component-anatomy--pin-bg, deeppink);\n  background: var(--component-anatomy--pin-bg, deeppink);\n  color: var(--component-anatomy--pin-fg, white);\n  transform: translate(-50%, -50%) scale(1);\n  width: 1.5em;\n  height: 1.5em;\n  border-radius: 1.5em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: .218s ease;\n}\n\n#pins li[aria-current] {\n  border-color: var(--component-anatomy--pin-hl, currentColor);\n  transform: translate(-50%, -50%) scale(1.2);\n}\n\n:host(:not([edit])) #pins:hover li {\n  transform: translate(-50%, -50%) scale(0.2);\n  color: transparent;\n}\n\n#list {\n  margin: 0;\n  padding: .5em 2.5em;\n}\n\n#list:empty {\n  display: none;\n}\n\n#list li {\n  cursor: pointer;\n  text-align: start;\n}\n\n#list li[contentEditable] {\n  cursor: text;\n}\n\n#list li:not(:last-child) {\n  margin-bottom: .5em;\n}\n\n#list a {\n  color: var(--component-anatomy--link-fg, currentColor);\n}\n\n#copy {\n  position: absolute;\n  opacity: 0;\n  pointer-events: none;\n}\n</style> <div id="component-anatomy">\n    <figure id="area">\n      <slot id="slot"></slot>\n      <ol id="pins"></ol>\n    </figure>\n    <ol id="list"></ol>\n    <input id="copy">\n  </div>',this._$pins=this.shadowRoot.getElementById("pins"),this._$list=this.shadowRoot.getElementById("list"),this._$copy=this.shadowRoot.getElementById("copy")}static get observedAttributes(){return["definitions","edit"]}attributeChangedCallback(t){"definitions"===t&&this._render(),"edit"===t&&this._edit()}connectedCallback(){this._$pins.addEventListener("click",(t=>this._click(t))),this.addEventListener("keyup",(t=>this._esc(t)))}clear(){return this.definitions=[],this}create(t){return["x","y","term"].every((e=>e in t))&&(this.definitions=this.definitions.concat(t)),this}remove(t){return this.definitions=this.definitions.filter(((e,n)=>n!==t)),this}update(t,e){return this.definitions=this.definitions.map(((n,i)=>i===t?Object.assign(n,e):n)),this}_attributes(t){this.edit?t.setAttribute("contentEditable",""):t.removeAttribute("contentEditable")}_blur(t){const{textContent:e}=this._$list.children[t];e.trim()?this.update(t,{term:e}):this.remove(t)}_clear(){this._$pins.innerHTML="",this._$list.innerHTML=""}_click({offsetX:t,offsetY:e}){if(!this.edit)return;const{offsetWidth:n,offsetHeight:i}=this._$pins,[s,o]=[t/n,e/i].map((t=>`${Math.round(100*t)}%`));this.create({x:s,y:o,term:this.placeholder})}_create({x:t,y:e,term:n}){const i=this._$list.children.length;this._createPin({left:t,top:e},i),this._createDescription(n,i)}_createDescription(t,e){const n=document.createElement("li");this._processContent(t,n),this._attributes(n),n.id=`item-${e}`,n.addEventListener("mouseenter",(()=>this._mouseenter(e))),n.addEventListener("mouseleave",(()=>this._mouseleave(e))),n.addEventListener("blur",(()=>this._blur(e))),this._$list.appendChild(n)}_createPin(t,e){const n=document.createElement("li");Object.assign(n.style,t),n.setAttribute("aria-describedby",`item-${e}`),n.tabIndex=0,this._$pins.appendChild(n)}_edit(){[...this._$list.children].forEach(this._attributes,this)}_esc(t){"Escape"===t.key&&this.edit&&(this.edit=!1,this._$copy.select(),"function"==typeof document.execCommand&&document.execCommand("copy"))}_mouseenter(t){this._$pins.children[t].setAttribute("aria-current","")}_mouseleave(t){this._$pins.children[t].removeAttribute("aria-current")}_processContent(e,n){let i=document.createTextNode(e);n.appendChild(i),[...e.matchAll(t)].reduce(((t,e)=>{const{length:s}=e[0];i=i.splitText(e.index-t),i=i.splitText(s);const o=document.createElement("a");return Object.assign(o,e.groups),n.replaceChild(o,i.previousSibling),e.index+s}),0)}_render(){this._clear(),this.definitions.forEach(this._create,this),this._$copy.value=this.outerHTML}get definitions(){try{const t=JSON.parse(window.atob(this.getAttribute("definitions")));return[].concat(t).filter(Boolean)}catch(t){return[]}}set definitions(t){t&&t.length?Array.isArray(t)&&this.setAttribute("definitions",window.btoa(JSON.stringify(t))):this.removeAttribute("definitions")}get edit(){return this.hasAttribute("edit")}set edit(t){t?this.setAttribute("edit",""):this.removeAttribute("edit")}get placeholder(){return this.getAttribute("placeholder")||"placeholder"}set placeholder(t){t?this.setAttribute("placeholder",t):this.removeAttribute("placeholder")}get orientation(){return this.getAttribute("orientation")||"horizontal"}set orientation(t){t&&["horizontal","vertical"].includes(t)?this.setAttribute("orientation",t):this.removeAttribute("orientation")}}window.customElements.define("component-anatomy",e)}();
